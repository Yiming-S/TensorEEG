% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/validation.R
\name{validate_sim_eeg}
\alias{validate_sim_eeg}
\title{Validate Simulation Output via Visual Inspection}
\usage{
validate_sim_eeg(
  sim_res,
  class0_trial = NULL,
  class1_trial = NULL,
  channel = 1,
  fmax = 60,
  snr_target_db = NULL,
  save_path = NULL,
  return_metrics = FALSE
)
}
\arguments{
\item{sim_res}{List. The simulation object returned by \code{\link{sim_eeg_master}}, containing
\code{$data}, \code{$params}, \code{$labels}, and \code{$audit}.}

\item{class0_trial}{Integer (optional). Trial index to use as Class 0 representative.
If NULL, the first available class 0 trial is used.}

\item{class1_trial}{Integer (optional). Trial index to use as Class 1 representative.
If NULL, the first available class 1 trial is used.}

\item{channel}{Integer. Channel index used for temporal and PSD inspection.}

\item{fmax}{Numeric. Maximum frequency (Hz) for PSD plot.}

\item{snr_target_db}{Numeric (optional). Target SNR line for audit plot.
If NULL, median realized SNR is used.}

\item{save_path}{Character (optional). If provided, saves the dashboard to PNG file.}

\item{return_metrics}{Logical. If TRUE, returns a metrics list instead of only plotting.}
}
\value{
Invisible metrics list. If \code{return_metrics = TRUE}, the metrics list
  is returned explicitly.
}
\description{
Generates a diagnostic dashboard (2x2 grid) to visually verify the spectral, spatial,
and temporal properties of the generated EEG tensor. This function is essential for
confirming that the simulation parameters (SNR, frequency peaks, spatial smoothness)
were correctly realized in the output.
}
\details{
The function produces four key validation plots:
\enumerate{
  \item \strong{Temporal Contrast (Top-Left):} Overlays single-trial traces from Class 0 vs. Class 1
    (after 1Hz High-Pass filtering). This verifies the amplitude difference defined by the class logic
    (e.g., Class 1 should show higher task amplitude).
  \item \strong{Power Spectral Density (Top-Right):} Computes the PSD of a Class 1 trial.
    Verifies the presence of the 20Hz Task peak (red dashed line) and the specific background
    oscillation frequencies (grey dotted lines) defined in the VAR(2) model.
  \item \strong{Spatial Covariance (Bottom-Left):} Displays the sensor covariance matrix.
    A "smooth" diagonal structure confirms that the Laplacian regularization successfully
    simulated volume conduction (neighboring sensors are highly correlated).
  \item \strong{SNR Audit (Bottom-Right):} Plots the "Realized Neural SNR" across all trials.
    Verifies that the closed-loop gain control system successfully maintained the target SNR
    (e.g., 5dB) despite random fluctuations in signal power.
}
}
